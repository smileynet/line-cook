{"id":"lc-21r","title":"Fix workflow quality gates and command boundaries","description":"Fixes critical, high, and medium priority issues found in the deep-dive analysis of Line Cook commands and agents.\n\nKey fixes:\n- P0: CC /run ignores serve verdict\n- P0: Tidy auto-closes epics, bypassing close-service quality gate\n- P1: Serve polisher→sous-chef order creates blind spots\n- P1: Verdict naming inconsistent across agents\n- P2: Cook-to-tidy finding transfer fragile\n- P2: In-progress triage too discretionary","status":"closed","priority":1,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-12T20:39:56.954083964-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:46:33.852351547-08:00","closed_at":"2026-02-12T20:46:33.852351547-08:00","close_reason":"Closed","comments":[{"id":8,"issue_id":"lc-21r","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (1 nit - emoji in bash template, internally consistent)\nPolish: 1 file refined (sous-chef.md.template - removed redundant conditional wrapping)\nSummary: All 5 fixes are logically sound, cross-references align across 20 files. Template sync correct for all 3 platforms. Verdict standardization complete with no stale references.","created_at":"2026-02-13T04:56:41Z"},{"id":9,"issue_id":"lc-21r","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix critical quality gate gaps and command boundary issues found in deep-dive analysis\nBefore: CC /run ignored serve verdicts, tidy auto-closed epics bypassing quality gates, serve ran polisher before reviewer, verdict names inconsistent\nAfter: All quality gates enforced, epic closure routed through close-service, reviewer sees unpolished code first, verdicts standardized to APPROVED|NEEDS_CHANGES|BLOCKED\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none needed — serve was APPROVED with 0 findings)\n\nCommits: a55a6f6 (fix), 11343c8 (polish), 4af3f70 (beads sync)\nPush: skipped (ephemeral branch, no upstream)","created_at":"2026-02-13T04:59:27Z"}]}
{"id":"lc-21r.1","title":"Add serve verdict handling to CC /run path","description":"The Claude Code path in run.md.template (Step 3) invokes serve but never checks the SERVE_RESULT verdict. It proceeds directly to Step 4 (tidy) regardless.\n\nThe OpenCode path correctly checks SERVE_RESULT and has a rework loop with up to 3 attempts.\n\nMeanwhile, serve itself says: \"Do NOT continue to tidy\" (on NEEDS_CHANGES).\n\nFix: Add explicit SERVE_RESULT verdict handling to the CC /run path, matching OpenCode's structure.\n\nFiles: core/templates/commands/run.md.template (lines 83-91 CC path)","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T20:40:05.270204679-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:42:40.73907525-08:00","closed_at":"2026-02-12T20:42:40.73907525-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-21r.1","depends_on_id":"lc-21r","type":"parent-child","created_at":"2026-02-12T20:40:05.272195994-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-21r.2","title":"Move epic closure from tidy to close-service","description":"Tidy Step 4 (tidy.md.template:245-287) runs bd epic close-eligible and then merges the epic branch to main. This bypasses close-service entirely -- no E2E validation, no critic review, no acceptance documentation.\n\nFix:\n1. Tidy: Remove epic closure and branch merge logic. Replace with detection + suggestion to run close-service.\n2. Close-service: Add branch merge logic after epic validation passes.\n3. Run Step 5: Already correctly delegates to close-service, so no change needed there.\n\nFiles: \n- core/templates/commands/tidy.md.template (Step 4)\n- core/templates/commands/close-service.md.template (add Step 8.5 for branch merge)","status":"closed","priority":0,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T20:40:10.705966899-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:42:40.750648839-08:00","closed_at":"2026-02-12T20:42:40.750648839-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-21r.2","depends_on_id":"lc-21r","type":"parent-child","created_at":"2026-02-12T20:40:10.707899748-08:00","created_by":"Sam Biggins"}],"comments":[{"id":10,"issue_id":"lc-21r.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Clean release commit — version bumps consistent across all 3 files, changelog links correctly chained.","created_at":"2026-02-13T06:27:17Z"},{"id":11,"issue_id":"lc-21r.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Release v0.14.0 with workflow quality gates, close-service command, and OpenCode agent parity\nBefore: v0.13.2 — epics closed silently in tidy, serve polished before reviewing, run ignored serve verdict\nAfter: v0.14.0 released and pushed — GitHub Actions will create the release\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: 91cd1d2 chore(release): v0.14.0\nPush: success origin/main","created_at":"2026-02-13T06:40:22Z"},{"id":24,"issue_id":"lc-21r.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking, 2 nits (pre-existing catch-all redundancy, inconsistent merge conflict wording)\nSummary: All three process fidelity bugs correctly addressed. Clean implementation following existing patterns with comprehensive test coverage (12 new tests across 5 classes). 143 tests pass, bundle succeeds.","created_at":"2026-02-14T02:20:43Z"},{"id":25,"issue_id":"lc-21r.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix three critical bugs where the line loop diverged from the intended /line:run process\nBefore: Skip list/epic filter bypassed (cook auto-selects), tasks not reopened on retry, epic branches never merged to main\nAfter: Cook receives target task ID, tasks reopened on NEEDS_CHANGES, epic branches merge via closed_epics field on IterationResult\n\nProblems encountered:\n  - Sous-chef falsely flagged parse_serve_result as requiring SERVE_RESULT header — verified fallback regex at line 57 handles headerless input; test was valid\n  - Two nits from serve review (inconsistent merge messages, redundant close-service) — fixed in follow-up commit\n\nIssues filed: 0\n  (Both nits were addressed inline)\n\nCommits: 8232ba0, a9826d4\nPush: success","created_at":"2026-02-14T02:26:42Z"}]}
{"id":"lc-21r.3","title":"Reverse serve order to sous-chef then polisher","description":"Currently serve runs polisher (Edit access) before sous-chef (read-only reviewer). This creates attribution loss, anchoring bias, and no rollback path.\n\nFix (Option A from analysis): Reverse to sous-chef→polisher:\n1. Sous-chef reviews the original developer code → produces verdict + issues\n2. If APPROVED: polisher refines for clarity → changes go in a separate commit\n3. If NEEDS_CHANGES: send back to cook (no polish needed on code that needs rework)\n\nFiles: core/templates/commands/serve.md.template (Steps 2-3)","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T20:40:14.49795001-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:43:43.796155073-08:00","closed_at":"2026-02-12T20:43:43.796155073-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-21r.3","depends_on_id":"lc-21r","type":"parent-child","created_at":"2026-02-12T20:40:14.500689704-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-21r.4","title":"Standardize verdict vocabulary across agents","description":"Current verdict vocabulary is inconsistent:\n- sous-chef: ready_for_tidy | needs_changes | blocked (lowercase_snake)\n- SERVE_RESULT: APPROVED | NEEDS_CHANGES | BLOCKED (UPPER_CASE)\n- taster: APPROVED | APPROVED WITH NOTES | REJECTED\n- maitre: APPROVED | NEEDS CHANGES | BLOCKED\n- critic: PASS | NEEDS_WORK | FAIL\n\nFix: Standardize sous-chef to use APPROVED | NEEDS_CHANGES | BLOCKED to match SERVE_RESULT.\n\nFiles:\n- core/templates/agents/sous-chef.md.template\n- core/templates/commands/serve.md.template (document mapping)","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T20:40:18.475847206-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:45:08.694627186-08:00","closed_at":"2026-02-12T20:45:08.694627186-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-21r.4","depends_on_id":"lc-21r","type":"parent-child","created_at":"2026-02-12T20:40:18.477756777-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-21r.4","depends_on_id":"lc-21r.3","type":"blocks","created_at":"2026-02-12T20:40:29.840928763-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-21r.5","title":"Fix cook-to-tidy finding transfer and in-progress triage","description":"Two P2 fixes:\n\n1. Cook-to-tidy finding transfer fragile: Tidy Step 2 says \"Review findings from cook and serve\" but doesn't tell the agent to read bead comments. In multi-session work with /clear, findings survive only in bead comments.\nFix: Tidy Step 2 should explicitly say to read bead comments (bd comments show \u003cid\u003e) for PHASE: COOK and PHASE: SERVE findings.\n\n2. In-progress triage too discretionary: Tidy Step 3 says \"If task appears complete based on git changes, close it. Do NOT ask the user.\" This is too much discretion for a non-interactive command.\nFix: Only close the current task (the one that was just cooked). Leave other in-progress tasks as-is with a note.\n\nFiles: core/templates/commands/tidy.md.template (Steps 2-3)","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T20:40:25.305443794-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T20:45:52.063233103-08:00","closed_at":"2026-02-12T20:45:52.063233103-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-21r.5","depends_on_id":"lc-21r","type":"parent-child","created_at":"2026-02-12T20:40:25.307196074-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-21r.5","depends_on_id":"lc-21r.2","type":"blocks","created_at":"2026-02-12T20:40:29.904757062-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-7qb","title":"Retrospective","status":"closed","priority":4,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-08T20:24:46.492236563-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T20:37:55.590509143-08:00","closed_at":"2026-02-08T20:37:55.590509143-08:00","close_reason":"All children completed","comments":[{"id":18,"issue_id":"lc-7qb","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Release process audit — 8 files across documentation, tooling, and version management. Polisher fixed Kiro command count directory (steering→prompts) and extracted _count_files helper. Sous-chef found no blocking issues. 2 nits noted (import alias, regex consistency) — not blocking.","created_at":"2026-02-13T15:07:14Z"},{"id":19,"issue_id":"lc-7qb","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Audit release process and fix documentation/tooling gaps\nBefore: Kiro had no version tracking, OpenCode dist not rebuilt during release, CHANGELOG had internal entries, install docs were wrong\nAfter: Kiro version managed end-to-end, OpenCode build step in release.py, CHANGELOG cleaned, docs accurate\n\nProblems encountered:\n  - Polisher found Kiro command count bug (counting steering/ instead of prompts/) — fixed\n\nIssues filed:\n  - (none needed)\n\nCommit: 0e37503\nPush: success (origin/epic/lc-7qb)","created_at":"2026-02-13T15:10:49Z"}]}
{"id":"lc-7qb.1","title":"Add validation scripts to CI","description":"Discovery Source: Release process e2e audit\nDiscovered During: research phase\n\nImpact:\nValidation scripts (check-plugin-health, check-platform-parity, doctor-docs)\nonly run during release or manual invocation. Adding them to CI would catch\nversion drift and parity issues earlier.\n\nContext:\nCurrently no CI gate runs before release. CI only covers opencode plugin changes.","status":"closed","priority":3,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T20:24:56.971428506-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T20:37:43.437784347-08:00","closed_at":"2026-02-08T20:37:43.437784347-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-7qb.1","depends_on_id":"lc-7qb","type":"parent-child","created_at":"2026-02-08T20:24:56.973672451-08:00","created_by":"Sam Biggins"}],"comments":[{"id":1,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (4 nits noted, 1 addressed)\nSummary: Script performance optimizations (truncation, caching, removed duplication) and template integration are clean. Polisher refined helpers, sous-chef found no blocking issues.","created_at":"2026-02-10T15:30:25Z"},{"id":2,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Optimize helper scripts for performance and wire them into agent templates\nBefore: Templates used 50+ lines of inline bash/jq for data collection; scripts had unbounded output\nAfter: Templates use single structured script calls; diffs capped at 200 lines, serve comments at 2000 chars, parent listings cached\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none needed)\n\nCommit: c5e2c78\nPush: origin/main","created_at":"2026-02-10T15:46:10Z"},{"id":3,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 blocking (3 nits noted, 1 addressed)\nSummary: Template cleanup removes redundant bd show/bd list/git status calls in cook and serve templates, replacing them with references to kitchen-equipment.py and diff-collector.py JSON output. No data gaps, accurate field references, consistent language.","created_at":"2026-02-10T16:04:00Z"},{"id":4,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Remove redundant subprocess calls from cook and serve templates\nBefore: Templates told agents to run bd show, bd list, git status alongside helper scripts — mixed signals\nAfter: Templates consistently reference kitchen-equipment.py and diff-collector.py JSON output\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none needed)\n\nCommit: d4fd53e\nPush: origin/main","created_at":"2026-02-10T16:05:25Z"},{"id":5,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary:  additions to 4 templates follow established pattern consistently. Two cosmetic nits noted (bash snippet hardcodes path, Arguments line placement varies slightly) — both match existing patterns and are functionally irrelevant.","created_at":"2026-02-11T14:15:02Z"},{"id":6,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: approved\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: Clean implementation wiring all 5 OpenCode subagents. No issues found by polisher (3 minor refinements applied) or sous-chef (ready_for_tidy). Zero CC regressions.","created_at":"2026-02-12T06:30:10Z"},{"id":7,"issue_id":"lc-7qb.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Wire up all 5 OpenCode subagents (taster, polisher, sous-chef, maitre, critic)\nBefore: OpenCode used inline self-review in commands, no agent delegation\nAfter: All 5 agents delegated via Task tool with graceful fallbacks\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: b746515\nPush: success origin/main","created_at":"2026-02-12T06:34:36Z"}]}
{"id":"lc-7qb.2","title":"Add rollback on partial release failure","description":"Discovery Source: Release process e2e audit\nDiscovered During: research phase\n\nImpact:\nIf release.py fails mid-pipeline, modified files are left dirty. Currently\nprints rollback hint but could auto-rollback with git checkout on failure.\n\nContext:\nLow priority — single maintainer can easily run git checkout manually.\nThe rollback hint added in this session is sufficient for now.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T20:24:59.204873165-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T20:37:43.442342181-08:00","closed_at":"2026-02-08T20:37:43.442342181-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-7qb.2","depends_on_id":"lc-7qb","type":"parent-child","created_at":"2026-02-08T20:24:59.206575141-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-7qb.3","title":"Strengthen changelog format validation in doctor-docs","description":"Discovery Source: Release process e2e audit\nDiscovered During: research phase\n\nImpact:\ndoctor-docs.py only warns if keepachangelog.com isn't referenced. Does not\nvalidate date format (ISO 8601), SemVer version sections, or comparison\nlink structure. Could catch malformed changelogs before release.\n\nContext:\nCurrent leniency hasn't caused issues but is a gap in validation coverage.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-08T20:25:04.075558402-08:00","created_by":"Sam Biggins","updated_at":"2026-02-08T20:37:43.461639091-08:00","closed_at":"2026-02-08T20:37:43.461639091-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-7qb.3","depends_on_id":"lc-7qb","type":"parent-child","created_at":"2026-02-08T20:25:04.077671741-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-7qb.4","title":"Extract shared run_cmd/run_bd_json into helper module","description":"Discovery Source: Harden helper scripts session\nDiscovered During: serve phase (sous-chef review, 3 rounds)\n\nImpact:\nrun_cmd is copy-pasted identically across all 6 helper scripts.\nrun_bd_json is duplicated across 3 scripts. Growing maintenance cost\nif the pattern needs updating (e.g. adding timeout config).\n\nContext:\nScripts are standalone by design (no import dependencies), which is\nthe right choice for a plugin system. But at 6+ copies, extraction\ninto a shared helpers.py in the scripts directory would reduce drift.\nNot urgent — only worth doing if more scripts are added.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-10T06:30:16.048089009-08:00","created_by":"Sam Biggins","updated_at":"2026-02-12T23:24:25.011585508-08:00","closed_at":"2026-02-12T23:24:25.011585508-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-7qb.4","depends_on_id":"lc-7qb","type":"parent-child","created_at":"2026-02-10T06:30:16.051930682-08:00","created_by":"Sam Biggins"}],"comments":[{"id":12,"issue_id":"lc-7qb.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T07:19:38Z"},{"id":13,"issue_id":"lc-7qb.4","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Extract duplicated run_cmd/run_bd_json into shared helpers module to reduce maintenance drift\nBefore: run_cmd copy-pasted in all 6 helper scripts, run_bd_json duplicated in 2 scripts\nAfter: Single source of truth in helpers.py, all scripts import from it\n\nFiles: 8 changed (1 new helpers.py, 1 new test file, 6 scripts updated)\nFindings: _validate_bead_id also duplicated in 4 scripts (candidate for future extraction)","created_at":"2026-02-13T07:24:25Z"},{"id":14,"issue_id":"lc-7qb.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 critical, 0 major, 2 nits (not blocking)\nSummary: Clean extraction of duplicated helpers. Tests thorough, existing integration tests preserved.","created_at":"2026-02-13T07:30:17Z"},{"id":15,"issue_id":"lc-7qb.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Extract duplicated subprocess helpers to reduce maintenance drift\nBefore: run_cmd copy-pasted in 6 scripts, run_bd_json in 2 scripts\nAfter: Single helpers.py module, all scripts import from it\n\nProblems encountered:\n  - Overwrote existing test_helpers.py with unit tests: restored original, renamed to test_helpers_unit.py\n\nIssues filed:\n  - lc-7qb.5: Extract _validate_bead_id and adopt run_bd_json in remaining scripts [P4]\n\nCommit: 0e09bfb\nPush: success (origin/epic/lc-7qb)","created_at":"2026-02-13T07:31:45Z"},{"id":16,"issue_id":"lc-7qb.4","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 auto-fixed, 0 to-file)\nSummary: ADR-0015 is well-structured with accurate technical claims, consistent formatting, and a useful decision matrix. README backfill for ADR-0014 verified correct. Two nits noted (cross-reference precision, arbitrary threshold) — neither blocking.","created_at":"2026-02-13T14:24:23Z"},{"id":17,"issue_id":"lc-7qb.4","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Document shared module vs bundled script design decision as ADR-0015\nBefore: Two code-sharing patterns existed without documented guidance\nAfter: ADR-0015 captures when to use sibling imports vs bundling; README backfilled for ADR-0014\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: f28737a\nPush: success (origin/epic/lc-7qb)","created_at":"2026-02-13T14:25:52Z"}]}
{"id":"lc-7qb.5","title":"Extract _validate_bead_id and adopt run_bd_json in remaining scripts","description":"Discovery Source: lc-7qb.4 - Extract shared run_cmd/run_bd_json into helper module\nDiscovered During: cook phase + serve phase (sous-chef review)\n\nImpact:\n_validate_bead_id is copy-pasted identically across 4 scripts\n(kitchen-equipment.py, diff-collector.py, plan-validator.py,\nstate-snapshot.py). Additionally, diff-collector.py (_get_bead_detail)\nand plan-validator.py (_fetch_bead) manually duplicate run_bd_json\nlogic instead of importing the now-shared helper.\n\nContext:\nhelpers.py exists and is imported by all 6 scripts. Natural follow-up\nto add _validate_bead_id to helpers.py, and refactor _get_bead_detail\nand _fetch_bead to use run_bd_json. Not urgent — only reduces drift.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-12T23:31:04.149470594-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T07:15:58.665359948-08:00","closed_at":"2026-02-13T07:15:58.665359948-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-7qb.5","depends_on_id":"lc-7qb","type":"parent-child","created_at":"2026-02-12T23:31:04.151279715-08:00","created_by":"Sam Biggins"}],"comments":[{"id":20,"issue_id":"lc-7qb.5","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-13T15:12:17Z"},{"id":21,"issue_id":"lc-7qb.5","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Eliminate copy-pasted _validate_bead_id across 4 scripts and duplicate run_bd_json logic in 2 scripts\nBefore: _validate_bead_id duplicated in kitchen-equipment.py, diff-collector.py, plan-validator.py, state-snapshot.py; _get_bead_detail and _fetch_bead manually reimplemented run_bd_json logic\nAfter: Single validate_bead_id in helpers.py imported by all 4 scripts; _get_bead_detail and _fetch_bead use run_bd_json\n\nFiles: 6 changed (helpers.py, kitchen-equipment.py, diff-collector.py, plan-validator.py, state-snapshot.py, test_helpers_unit.py)\nFindings: none","created_at":"2026-02-13T15:15:58Z"},{"id":22,"issue_id":"lc-7qb.5","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (8 polisher refinements, 0 to-file)\nSummary: Clean extraction of validate_bead_id and run_bd_json adoption. Polisher simplified redundant isinstance guards. Sous-chef found no issues — 1 nit (stale docstring) addressed by polisher.","created_at":"2026-02-13T15:19:31Z"},{"id":23,"issue_id":"lc-7qb.5","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Eliminate duplicated validation and BD JSON parsing logic across helper scripts\nBefore: _validate_bead_id copy-pasted in 4 scripts; _get_bead_detail and _fetch_bead reimplemented run_bd_json\nAfter: Single validate_bead_id in helpers.py; both functions use run_bd_json\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: 60c9e06\nPush: success (origin/epic/lc-7qb)","created_at":"2026-02-13T15:20:33Z"}]}
{"id":"lc-egd","title":"Phase: Line Loop Process Optimization","description":"Fix bugs, reduce subprocess overhead, add findings tracking, and improve long-running loop resilience.\n\nDuration: 5-7 sessions\n\nPlanning context: docs/planning/menu-plan.yaml","status":"open","priority":2,"issue_type":"epic","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:01.628180739-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:10:01.628180739-08:00"}
{"id":"lc-egd.1","title":"Feature: Correct loop failure handling","description":"As a loop operator, I want the circuit breaker and task detection to work correctly so that the loop stops when it should and attributes work to the right task.\n\nAcceptance Criteria:\n- Circuit breaker trips when failure_threshold failures occur anywhere in the window (not just last N)\n- detect_worked_task prefers the target_task_id when it appears in the changed set\n- Circuit breaker patterns like [F,F,F,F,F,S,F,F,F,F] (9/10 failures) correctly trip the breaker\n- Existing circuit breaker and detect_worked_task tests continue passing\n\nTracer Strategy:\n  Minimal flow: Record failures → Check window → Trip breaker → Loop stops\n  Layers: models.py (CircuitBreaker) → iteration.py (detect_worked_task) → loop.py (post-iteration check)\n  Expansion: Adaptive thresholds, per-epic breakers (deferred)","status":"closed","priority":1,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:14.561693394-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:56:04.413286264-08:00","closed_at":"2026-02-13T21:56:04.413286264-08:00","close_reason":"All 4 tasks closed. Acceptance criteria verified: circuit breaker evaluates full window, detect_worked_task prefers target, [F,F,F,F,F,S,F,F,F,F] pattern trips correctly, existing tests pass. 171/171 tests passing.","dependencies":[{"issue_id":"lc-egd.1","depends_on_id":"lc-egd","type":"parent-child","created_at":"2026-02-13T21:10:14.564659178-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.1.1","title":"Fix circuit breaker window logic","description":"Tracer: Proves breaker correctly evaluates full window — foundation for all failure handling\n\n- Change `self.window[-self.failure_threshold:]` to `self.window` in is_open()\n- Bug: currently checks only last 5 items, not full 10-item window\n- Pattern [F,F,F,F,F,S,F,F,F,F] has 9/10 failures but doesn't trip\n- Add test case for this pattern to TestCircuitBreaker\n\nDeliverable: Fixed CircuitBreaker.is_open() with new test cases\nReference: core/line_loop/models.py:74-79\nTDD: true","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:46.331849416-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:19:08.398083092-08:00","closed_at":"2026-02-13T21:19:08.398083092-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.1.1","depends_on_id":"lc-egd.1","type":"parent-child","created_at":"2026-02-13T21:10:46.407081395-08:00","created_by":"Sam Biggins"}],"comments":[{"id":26,"issue_id":"lc-egd.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T05:16:37Z"},{"id":27,"issue_id":"lc-egd.1.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix circuit breaker window logic to evaluate full sliding window\nBefore: is_open() only checked last failure_threshold items, missing failures earlier in window\nAfter: is_open() counts failures across full window, correctly tripping on high failure rates\n\nFiles: 3 changed (models.py, test_line_loop.py, line-loop.py bundle)\nFindings: none","created_at":"2026-02-14T05:19:08Z"},{"id":28,"issue_id":"lc-egd.1.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking (1 minor auto-fixed via re-bundle, 1 nit for follow-up)\nSummary: Core fix correct. Polisher updated docstrings to match new semantics. Re-bundled to sync. Sous-chef praised regression test design.","created_at":"2026-02-14T05:22:18Z"},{"id":29,"issue_id":"lc-egd.1.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix circuit breaker window logic to evaluate full sliding window\nBefore: is_open() only checked last failure_threshold items, missing failures earlier in window\nAfter: is_open() counts failures across full window, correctly tripping on high failure rates\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - lc-egd.1.4: Update skill file circuit breaker example [P4]\n\nCommit: 40a82a3\nPush: success (origin/epic/lc-egd)","created_at":"2026-02-14T05:23:19Z"}]}
{"id":"lc-egd.1.2","title":"Fix detect_worked_task tiebreaker","description":"Tracer: Proves task attribution works when multiple tasks change — critical for retry logic\n\n- Add optional target_task_id parameter to detect_worked_task()\n- If target is in the changed set, prefer it over dot-count heuristic\n- Update call sites in run_iteration() to pass target_task_id\n- Add test: multiple tasks change, target_task_id preferred\n\nDeliverable: detect_worked_task with target preference, updated call sites, new tests\nReference: core/line_loop/iteration.py:221-259\nTDD: true","status":"closed","priority":1,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:50.455749535-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:29:58.059584357-08:00","closed_at":"2026-02-13T21:29:58.059584357-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.1.2","depends_on_id":"lc-egd.1","type":"parent-child","created_at":"2026-02-13T21:10:50.458174677-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.1.2","depends_on_id":"lc-egd.1.1","type":"blocks","created_at":"2026-02-13T21:11:38.964678727-08:00","created_by":"Sam Biggins"}],"comments":[{"id":30,"issue_id":"lc-egd.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T05:27:35Z"},{"id":31,"issue_id":"lc-egd.1.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Fix task attribution when multiple tasks change in the same iteration\nBefore: detect_worked_task used dot-count heuristic, could pick wrong task during retries\nAfter: detect_worked_task prefers target_task_id when present in changed set, falls back to heuristic\n\nFiles: 3 changed (iteration.py, test_line_loop.py, line-loop.py bundle)\nFindings: none","created_at":"2026-02-14T05:29:58Z"},{"id":32,"issue_id":"lc-egd.1.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking (1 nit: consistency of in_progress branch fallback)\nSummary: Clean implementation with well-extracted helper. Backwards-compatible API. Thorough test coverage across all branches.","created_at":"2026-02-14T05:33:45Z"},{"id":33,"issue_id":"lc-egd.1.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Fix task attribution when multiple tasks change in the same iteration\nBefore: detect_worked_task used dot-count heuristic, could pick wrong task during retries\nAfter: detect_worked_task prefers target_task_id when present in changed set, falls back to heuristic\n\nProblems encountered:\n  - (none)\n\nIssues filed:\n  - (none)\n\nCommit: b0c5f83\nPush: success (origin/epic/lc-egd)","created_at":"2026-02-14T05:34:22Z"}]}
{"id":"lc-egd.1.3","title":"Add integration tests for failure patterns","description":"Tracer: Proves correctness across combined failure scenarios\n\n- TestCircuitBreakerPatterns: intermittent [S,F,S,F,...], burst, recovery\n- TestDetectWorkedTaskWithTarget: multi-task change, target absent, target present\n- Verify circuit breaker + skip list interaction\n\nDeliverable: New test classes covering failure edge cases\nReference: tests/test_line_loop.py\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:54.184914034-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:43:58.798661943-08:00","closed_at":"2026-02-13T21:43:58.798661943-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.1.3","depends_on_id":"lc-egd.1","type":"parent-child","created_at":"2026-02-13T21:10:54.186921259-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.1.3","depends_on_id":"lc-egd.1.2","type":"blocks","created_at":"2026-02-13T21:11:39.023912793-08:00","created_by":"Sam Biggins"}],"comments":[{"id":34,"issue_id":"lc-egd.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T05:40:06Z"},{"id":35,"issue_id":"lc-egd.1.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add integration tests proving correctness across combined failure scenarios\nBefore: Only unit tests for individual circuit breaker and skip list; no tests for pattern-based failure scenarios or combined system behavior\nAfter: 22 new integration tests covering intermittent/burst/recovery circuit breaker patterns, multi-task detect_worked_task scenarios, and circuit breaker + skip list interaction\n\nFiles: 1 changed (tests/test_line_loop.py)\nFindings: none","created_at":"2026-02-14T05:43:58Z"},{"id":36,"issue_id":"lc-egd.1.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking, 2 nits\nSummary: Well-structured integration tests with correct window state calculations, good scenario coverage, and consistent codebase conventions.","created_at":"2026-02-14T05:51:12Z"},{"id":37,"issue_id":"lc-egd.1.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Prove correctness across combined failure scenarios\nBefore: Only unit tests for individual circuit breaker and skip list components\nAfter: 22 integration tests covering pattern-based failures, multi-task detection, and combined system behavior\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: d8d7c4c\nPush: success","created_at":"2026-02-14T05:53:35Z"}]}
{"id":"lc-egd.1.4","title":"Update skill file circuit breaker example","description":"Discovery Source: lc-egd.1.1 - Fix circuit breaker window logic\nDiscovered During: serve phase (sous-chef review)\n\nImpact:\npython-scripting.md:252 still shows the old buggy pattern\n`self.window[-self.failure_threshold:]`. Could mislead future\ncontributors or Claude sessions into replicating the bug.\n\nContext:\nNot runtime code — skill file example. Low priority but worth\nupdating to match the fixed semantics.","status":"closed","priority":4,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:22:51.139947822-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:24:35.76766586-08:00","closed_at":"2026-02-13T21:24:35.76766586-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.1.4","depends_on_id":"lc-egd.1","type":"parent-child","created_at":"2026-02-13T21:22:51.141749611-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.2","title":"Feature: Reduced iteration overhead","description":"As a loop operator, I want iterations to complete faster so that more work gets done per hour of autonomous execution.\n\nAcceptance Criteria:\n- BeadSnapshot.get_by_id() uses O(1) dict lookup instead of O(n) list scan\n- Epic ancestor lookups are cached per-snapshot (built once, used many times)\n- Redundant snapshot captures eliminated — one before cook, one after tidy\n- Subprocess calls per iteration reduced from ~30 to ~15\n\nTracer Strategy:\n  Minimal flow: Build index → Cache ancestors → Take snapshot once → Reuse throughout\n  Layers: models.py (index) → iteration.py (cache + consolidation) → loop.py (reuse)\n  Expansion: Adaptive snapshot invalidation, subprocess call metrics (deferred)","status":"closed","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:19.565636176-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T05:10:25.132659999-08:00","closed_at":"2026-02-14T05:10:25.132659999-08:00","close_reason":"All 3 tasks complete: O(1) dict index, ancestor cache, snapshot consolidation. Subprocess calls per iteration reduced from ~30 to ~15.","dependencies":[{"issue_id":"lc-egd.2","depends_on_id":"lc-egd","type":"parent-child","created_at":"2026-02-13T21:10:19.567816681-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.2","depends_on_id":"lc-egd.1","type":"blocks","created_at":"2026-02-13T21:10:35.534527306-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.2.1","title":"Add dict index to BeadSnapshot.get_by_id()","description":"Tracer: Foundation for all performance work — O(1) lookups enable efficient caching\n\n- Add _index field (Optional[dict]) to BeadSnapshot dataclass\n- Lazy build on first access via _build_index()\n- Replace linear scan in get_by_id() with dict lookup\n- Exclude _index from repr and compare (field metadata)\n\nDeliverable: O(1) get_by_id() with lazy index, existing tests pass\nReference: core/line_loop/models.py:267-310\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:01.603083713-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T22:10:25.704915341-08:00","closed_at":"2026-02-13T22:10:25.704915341-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.2.1","depends_on_id":"lc-egd.2","type":"parent-child","created_at":"2026-02-13T21:11:01.604956196-08:00","created_by":"Sam Biggins"}],"comments":[{"id":38,"issue_id":"lc-egd.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T06:08:02Z"},{"id":39,"issue_id":"lc-egd.2.1","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Add O(1) dict index to BeadSnapshot.get_by_id() as foundation for all performance work\nBefore: get_by_id() used linear scan across ready + in_progress + closed lists on every call\nAfter: Lazy _index dict built on first access provides O(1) lookup, excluded from repr/compare\n\nFiles: 3 changed (models.py, test_line_loop.py, line-loop.py bundle)\nFindings: none","created_at":"2026-02-14T06:10:25Z"},{"id":40,"issue_id":"lc-egd.2.1","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking, 2 nits (documentation suggestions, not actionable)\nSummary: Clean, well-scoped change. Correct dataclass field config, comprehensive test coverage, proper bundle sync.","created_at":"2026-02-14T06:14:05Z"},{"id":41,"issue_id":"lc-egd.2.1","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Add O(1) dict index to BeadSnapshot.get_by_id() as foundation for performance work\nBefore: get_by_id() used linear scan across ready + in_progress + closed lists on every call\nAfter: Lazy _index dict built on first access provides O(1) lookup, excluded from repr/compare\n\nProblems encountered:\n  - (none)\n\nIssues filed: 0\nCommit: 2991b9e\nPush: success (origin/epic/lc-egd)","created_at":"2026-02-14T06:14:50Z"}]}
{"id":"lc-egd.2.2","title":"Build ancestor cache per snapshot","description":"Tracer: Proves hierarchy walks can be done once per snapshot — eliminates repeated parent lookups\n\n- Add build_epic_ancestor_map(snapshot, cwd) → dict[str, Optional[str]]\n- Walk every ready_work item's parent chain once, cache all traversed beads\n- Use in detect_first_epic(), _filter_excluded_epics(), get_next_ready_task()\n- Replace per-item find_epic_ancestor()/is_descendant_of_epic() calls\n\nDeliverable: Ancestor cache function, integrated into loop.py epic filtering\nReference: core/line_loop/iteration.py, core/line_loop/loop.py\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:06.837506485-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T22:59:59.489612045-08:00","closed_at":"2026-02-13T22:59:59.489612045-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.2.2","depends_on_id":"lc-egd.2","type":"parent-child","created_at":"2026-02-13T21:11:06.840365497-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.2.2","depends_on_id":"lc-egd.2.1","type":"blocks","created_at":"2026-02-13T21:11:40.165699924-08:00","created_by":"Sam Biggins"}],"comments":[{"id":42,"issue_id":"lc-egd.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T06:53:45Z"},{"id":43,"issue_id":"lc-egd.2.2","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Eliminate repeated parent-chain walks during epic filtering by caching ancestry once per snapshot\nBefore: Every call to detect_first_epic, _filter_excluded_epics, get_next_ready_task walked parent chains independently via find_epic_ancestor/is_descendant_of_epic, causing O(n*d) subprocess calls per iteration\nAfter: build_epic_ancestor_map walks each parent chain once per snapshot, callers do O(1) dict lookups\n\nFiles: 4 changed (iteration.py, loop.py, __init__.py, test_line_loop.py)\nFindings: none","created_at":"2026-02-14T06:59:59Z"},{"id":44,"issue_id":"lc-egd.2.2","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 found (0 critical, 2 nits noted)\nSummary: Clean implementation with correct caching strategy. Polisher consolidated duplicate exception handlers and eliminated redundant dict lookups.","created_at":"2026-02-14T07:03:00Z"},{"id":45,"issue_id":"lc-egd.2.2","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Eliminate repeated parent-chain walks during epic filtering\nBefore: Every epic filter call walked parent chains independently via find_epic_ancestor/is_descendant_of_epic\nAfter: build_epic_ancestor_map walks each chain once per snapshot, callers do O(1) dict lookups\n\nProblems encountered: none\n\nIssues filed: 0\n\nCommit: 32d2032\nPush: success","created_at":"2026-02-14T07:03:55Z"}]}
{"id":"lc-egd.2.3","title":"Consolidate snapshot captures","description":"Tracer: Proves iteration works with minimal snapshots — largest subprocess reduction\n\n- run_iteration(): Remove redundant intermediate snapshots\n- Take before snapshot once (passed by caller), after once post-tidy\n- Reuse after snapshot for completion cascade checks\n- Remove after_cook snapshot in non-timeout path\n- Cache get_task_info() results in local dict through cascade\n- loop.py: Reuse iteration's after counts for status/summary writes\n\nDeliverable: ~15 subprocess calls per iteration (down from ~30)\nReference: core/line_loop/iteration.py:1080-1578, core/line_loop/loop.py\nTDD: true","status":"closed","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:11.822129517-08:00","created_by":"Sam Biggins","updated_at":"2026-02-14T05:01:41.685830632-08:00","closed_at":"2026-02-14T05:01:41.685830632-08:00","close_reason":"Closed","dependencies":[{"issue_id":"lc-egd.2.3","depends_on_id":"lc-egd.2","type":"parent-child","created_at":"2026-02-13T21:11:11.823912697-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.2.3","depends_on_id":"lc-egd.2.2","type":"blocks","created_at":"2026-02-13T21:11:40.228494096-08:00","created_by":"Sam Biggins"}],"comments":[{"id":46,"issue_id":"lc-egd.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: started","created_at":"2026-02-14T07:06:48Z"},{"id":47,"issue_id":"lc-egd.2.3","author":"Sam Biggins","text":"PHASE: COOK\nStatus: completed\n\nSEMANTIC CONTEXT (for tidy summary):\nIntent: Reduce subprocess calls per iteration by eliminating redundant snapshot captures and caching task info lookups\nBefore: ~20-30 subprocess calls per iteration due to intermediate snapshots and repeated get_task_title/get_task_info calls\nAfter: ~12-15 subprocess calls per iteration via snapshot consolidation, task info caching, and title lookup via snapshot\n\nFiles: 2 changed (iteration.py, test_line_loop.py)\nFindings: loop.py post-loop snapshots kept (one-time cost, not per-iteration)","created_at":"2026-02-14T13:01:41Z"},{"id":48,"issue_id":"lc-egd.2.3","author":"Sam Biggins","text":"PHASE: SERVE\nStatus: completed\nVerdict: APPROVED\nIssues: 0 blocking, 2 nits (comment clarity, both addressed)\nSummary: Well-structured optimization with correct cache threading, backwards compatibility, and thorough tests.","created_at":"2026-02-14T13:06:59Z"},{"id":49,"issue_id":"lc-egd.2.3","author":"Sam Biggins","text":"PHASE: TIDY\nStatus: completed\n\nSESSION SUMMARY\n━━━━━━━━━━━━━━━\nIntent: Reduce subprocess calls per iteration by eliminating redundant snapshots and caching lookups\nBefore: ~20-30 subprocess calls per iteration from intermediate snapshots and repeated get_task_title calls\nAfter: ~12-15 calls via snapshot consolidation, task info caching, and title lookup via snapshot\n\nProblems encountered: none\n\nIssues filed: 0\n\nCommit: a99e449\nPush: success (origin/epic/lc-egd)","created_at":"2026-02-14T13:07:50Z"}]}
{"id":"lc-egd.3","title":"Feature: Autonomous findings tracking","description":"As a loop operator, I want to see what findings were filed during each iteration so that I can monitor code quality trends in watch mode.\n\nAcceptance Criteria:\n- IterationResult includes findings_count field\n- Findings count derived from snapshot delta (newly_filed items)\n- Watch mode status shows findings count per iteration\n- History JSONL includes findings_count for each iteration\n\nTracer Strategy:\n  Minimal flow: Tidy completes → Compute delta → Count newly_filed → Show in output\n  Layers: models.py (IterationResult field) → iteration.py (delta counting) → loop.py (display + serialization)\n  Expansion: Findings by severity, quality trend alerts, escalation integration (deferred)","status":"open","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:23.814502421-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:10:23.814502421-08:00","dependencies":[{"issue_id":"lc-egd.3","depends_on_id":"lc-egd","type":"parent-child","created_at":"2026-02-13T21:10:23.816313943-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.3","depends_on_id":"lc-egd.2","type":"blocks","created_at":"2026-02-13T21:10:35.590576786-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.3.1","title":"Track findings in IterationResult","description":"Tracer: Proves finding metadata flows through the iteration pipeline\n\n- Add findings_count: int = 0 to IterationResult\n- After tidy, count delta.newly_filed items\n- In print_human_iteration(): show \"Findings: N filed\" if \u003e 0\n- In serialize_iteration_for_status() and serialize_full_iteration(): include findings_count\n- In watch mode status: show findings in milestone display\n\nDeliverable: Findings count in IterationResult, status output, and history\nReference: core/line_loop/models.py, core/line_loop/iteration.py, core/line_loop/loop.py\nTDD: true","status":"open","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:20.423235967-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:11:20.423235967-08:00","dependencies":[{"issue_id":"lc-egd.3.1","depends_on_id":"lc-egd.3","type":"parent-child","created_at":"2026-02-13T21:11:20.424963541-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.4","title":"Feature: Resilient long-running execution","description":"As a loop operator, I want long-running loops to stay in sync with remote state and detect stuck phases appropriately so that multi-hour loops run reliably.\n\nAcceptance Criteria:\n- bd sync runs every 5 iterations to refresh bead state\n- Each phase has its own idle timeout (cook: 180s, serve: 300s, tidy: 90s)\n- Serve/plate timeouts reduced from 600s to 450s, close-service from 900s to 750s\n- All existing tests pass with new timeouts\n\nTracer Strategy:\n  Minimal flow: Check iteration count → Periodic sync → Phase-specific idle check → Timeout\n  Layers: config.py (constants) → phase.py (idle lookup) → loop.py (periodic sync)\n  Expansion: Adaptive timeouts from phase duration history, full git sync at intervals (deferred)","status":"open","priority":2,"issue_type":"feature","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:10:30.243095145-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:10:30.243095145-08:00","dependencies":[{"issue_id":"lc-egd.4","depends_on_id":"lc-egd","type":"parent-child","created_at":"2026-02-13T21:10:30.245249142-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.4","depends_on_id":"lc-egd.3","type":"blocks","created_at":"2026-02-13T21:10:35.645835936-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.4.1","title":"Add periodic bd sync every N iterations","description":"Tracer: Proves loop stays fresh during long runs — simplest resilience improvement\n\n- Add PERIODIC_SYNC_INTERVAL = 5 to config.py\n- In main loop, check iteration % interval == 0\n- Run bd sync with GIT_SYNC_TIMEOUT\n- Log sync attempt and result\n\nDeliverable: Periodic sync with configurable interval\nReference: core/line_loop/config.py, core/line_loop/loop.py\nTDD: true","status":"open","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:24.614271107-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:11:24.614271107-08:00","dependencies":[{"issue_id":"lc-egd.4.1","depends_on_id":"lc-egd.4","type":"parent-child","created_at":"2026-02-13T21:11:24.616240226-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.4.2","title":"Add per-phase idle timeouts and tune phase timeouts","description":"Tracer: Proves phases are monitored with appropriate sensitivity\n\n- Add DEFAULT_PHASE_IDLE_TIMEOUTS dict to config.py\n  cook: 180, serve: 300, tidy: 90, plate: 300, close-service: 600\n- In run_phase(): look up phase-specific idle timeout when no explicit one passed\n- Reduce DEFAULT_PHASE_TIMEOUTS: serve 600→450, plate 600→450, close-service 900→750\n- Explicit idle_timeout parameter overrides per-phase default\n\nDeliverable: Per-phase idle timeouts, tuned phase timeouts, updated tests\nReference: core/line_loop/config.py, core/line_loop/phase.py\nTDD: true","status":"open","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:29.12982187-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:11:29.12982187-08:00","dependencies":[{"issue_id":"lc-egd.4.2","depends_on_id":"lc-egd.4","type":"parent-child","created_at":"2026-02-13T21:11:29.131554437-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.4.2","depends_on_id":"lc-egd.4.1","type":"blocks","created_at":"2026-02-13T21:11:40.931685706-08:00","created_by":"Sam Biggins"}]}
{"id":"lc-egd.4.3","title":"Add integration tests for resilience features","description":"Tracer: Proves resilience features work together correctly\n\n- TestPeriodicSync: verify sync called at correct intervals (mock run_subprocess)\n- TestPerPhaseIdleTimeout: verify phase-specific idle timeout lookup\n- TestIdleDetection: test check_idle() with various time deltas\n- Update TestDefaultPhaseTimeouts assertions for new values\n\nDeliverable: Integration test classes for resilience features\nReference: tests/test_line_loop.py\nTDD: true","status":"open","priority":2,"issue_type":"task","owner":"sambiggins@gmail.com","created_at":"2026-02-13T21:11:32.268575792-08:00","created_by":"Sam Biggins","updated_at":"2026-02-13T21:11:32.268575792-08:00","dependencies":[{"issue_id":"lc-egd.4.3","depends_on_id":"lc-egd.4","type":"parent-child","created_at":"2026-02-13T21:11:32.271016921-08:00","created_by":"Sam Biggins"},{"issue_id":"lc-egd.4.3","depends_on_id":"lc-egd.4.2","type":"blocks","created_at":"2026-02-13T21:11:40.997375697-08:00","created_by":"Sam Biggins"}]}
