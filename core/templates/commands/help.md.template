---
description: Contextual help for Line Cook commands
@IF_CLAUDECODE@
allowed-tools: Bash, Read, Glob
@ENDIF_CLAUDECODE@
---

@IF_KIRO@
> **INSTRUCTIONS**: Execute this workflow now. Follow each step below. Do not display, summarize, or recreate this content as a file.
@ENDIF_KIRO@

## Summary

**Show available commands with contextual suggestions.** Helps users discover and navigate Line Cook commands.

**Arguments:** `$ARGUMENTS` (optional) - Command name for detailed help

---

## Process

### Step 1: Check for Detailed Help Request

**If `$ARGUMENTS` provided:**
- Show detailed help for that specific command
- Skip to Step 5

**Otherwise:**
- Continue to gather context and show quick reference

### Step 2: Gather Workspace Context

Detect current workspace state:

```bash
# Check if beads directory exists
BEADS_PRESENT=false
if [ -d ".beads" ]; then
  BEADS_PRESENT=true
fi

# Get task counts (if beads present)
if $BEADS_PRESENT; then
  READY_COUNT=$(bd ready 2>/dev/null | grep -c "^lc-" || echo 0)
  IN_PROGRESS_COUNT=$(bd list --status=in_progress 2>/dev/null | grep -c "^lc-" || echo 0)
  BLOCKED_COUNT=$(bd blocked 2>/dev/null | grep -c "^lc-" || echo 0)
fi

# Check git status
GIT_STATUS="clean"
if [ -n "$(git status --porcelain 2>/dev/null)" ]; then
  GIT_STATUS="dirty"
fi
```

### Step 3: Determine Suggested Command

Based on context, suggest the most relevant next action:

| Context | Suggested Command |
|---------|-------------------|
| No .beads directory | `/@NAMESPACE@mise` (start planning) |
| Beads present, no ready tasks | `/@NAMESPACE@mise` (create more work) |
| Ready tasks available | `/@NAMESPACE@cook <first-ready-id>` |
| In-progress tasks | `/@NAMESPACE@cook <in-progress-id>` |
| Dirty working tree + tasks done | `/@NAMESPACE@tidy` |

### Step 4: Output Quick Reference

Output the contextual help display:

```
╔══════════════════════════════════════════════════════════════╗
║  LINE COOK - Quick Reference                                 ║
╚══════════════════════════════════════════════════════════════╝

YOUR CONTEXT
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Ready tasks: <count> | In progress: <count> | Blocked: <count>
Working tree: <clean|dirty>
Suggested: <command based on context>

PLANNING (create work)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
/@NAMESPACE@mise         Full planning cycle (brainstorm→scope→finalize)
/@NAMESPACE@brainstorm   Explore problem space (divergent thinking)
/@NAMESPACE@scope        Create work breakdown (convergent thinking)
/@NAMESPACE@finalize     Convert plan to beads and test specs
/@NAMESPACE@plan-audit   Check bead health and structure
/@NAMESPACE@architecture-audit  Analyze code structure and smells
/@NAMESPACE@decision     Record architecture decisions (ADRs)

EXECUTION (do work)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
/@NAMESPACE@run          Full cycle (prep→cook→serve→tidy)
/@NAMESPACE@prep         Sync state, show ready tasks
/@NAMESPACE@cook         Execute task with TDD guardrails
/@NAMESPACE@serve        Review changes (sous-chef)
/@NAMESPACE@tidy         Commit and push
/@NAMESPACE@plate        Validate completed feature

REFERENCE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
/@NAMESPACE@getting-started   Workflow guide with bead reference
/@NAMESPACE@loop              Autonomous loop management
/@NAMESPACE@help <command>    Detailed help for specific command

For detailed help: /@NAMESPACE@help <command>
```

**Contextual variations:**

**If no .beads directory:**
```
YOUR CONTEXT
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
No beads directory found.
Suggested: /@NAMESPACE@mise (start planning your work)

Tip: Line Cook uses beads to track work across sessions.
     Run /@NAMESPACE@mise to create your first work breakdown.
```

**If dirty working tree:**
```
YOUR CONTEXT
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Ready tasks: <count> | In progress: <count> | Blocked: <count>
Working tree: dirty (uncommitted changes)
Suggested: /@NAMESPACE@tidy (commit your changes)

Tip: Run /@NAMESPACE@tidy to commit changes before starting new work.
```

### Step 5: Output Detailed Help (If Command Specified)

**If `$ARGUMENTS` is a command name:**

Read the command file and output detailed help:

```bash
COMMAND_FILE="commands/${ARGUMENTS#@NAMESPACE@}.md"
if [ ! -f "$COMMAND_FILE" ]; then
  # Try without prefix
  COMMAND_FILE="commands/$ARGUMENTS.md"
fi
```

Output format for detailed help:

```
╔══════════════════════════════════════════════════════════════╗
║  /@NAMESPACE@<command> - <description from frontmatter>      ║
╚══════════════════════════════════════════════════════════════╝

SUMMARY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
<Summary section from command file>

USAGE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
<Example usage from command file>

ARGUMENTS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
<Arguments if any>

RELATED COMMANDS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
<Previous/Next in workflow>

Back to overview: /@NAMESPACE@help
```

**Command not found:**

```
Command not found: <argument>

Available commands:
  Planning: mise, brainstorm, scope, finalize, plan-audit, architecture-audit, decision
  Execution: run, prep, cook, serve, tidy, plate
  Reference: getting-started, loop, help

Run /@NAMESPACE@help for overview.
```

---

## Command Descriptions

Quick reference for all commands:

| Command | Phase | Description |
|---------|-------|-------------|
| `/@NAMESPACE@mise` | Planning | Full planning cycle (orchestrates brainstorm→scope→finalize) |
| `/@NAMESPACE@brainstorm` | Planning | Explore problem space (divergent thinking) |
| `/@NAMESPACE@scope` | Planning | Create work breakdown (convergent thinking) |
| `/@NAMESPACE@finalize` | Planning | Convert plan to beads and test specs |
| `/@NAMESPACE@plan-audit` | Planning | Check bead health and structure |
| `/@NAMESPACE@architecture-audit` | Planning | Analyze code structure and smells |
| `/@NAMESPACE@decision` | Planning | Record, list, or supersede architecture decisions |
| `/@NAMESPACE@run` | Execution | Full cycle (orchestrates prep→cook→serve→tidy) |
| `/@NAMESPACE@prep` | Execution | Sync state, show ready tasks |
| `/@NAMESPACE@cook` | Execution | Execute task with TDD guardrails |
| `/@NAMESPACE@serve` | Execution | Review changes (sous-chef subagent) |
| `/@NAMESPACE@tidy` | Execution | Commit and push |
| `/@NAMESPACE@plate` | Execution | Validate completed feature (maître subagent) |
| `/@NAMESPACE@getting-started` | Reference | Workflow guide with bead reference |
| `/@NAMESPACE@loop` | Reference | Autonomous loop management |
| `/@NAMESPACE@help` | Reference | Contextual help for Line Cook commands |

---

## Workflow Relationships

```
PLANNING CYCLE              EXECUTION CYCLE
━━━━━━━━━━━━━━━             ━━━━━━━━━━━━━━━━
/brainstorm                 /prep
      ↓                           ↓
/scope                      /cook
      ↓                           ↓
/finalize                   /serve
                                  ↓
                            /tidy
                                  ↓
                            /plate (if feature complete)

/mise (orchestrator)        /run (orchestrator)
```

Planning creates work. Execution completes work.

---

## Example Usage

```
/@NAMESPACE@help              # Show quick reference with context
/@NAMESPACE@help cook         # Detailed help for cook command
/@NAMESPACE@help mise         # Detailed help for mise command
```
