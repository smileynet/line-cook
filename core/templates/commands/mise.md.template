---
description: Create work breakdown before starting implementation (orchestrates brainstorm→scope→finalize)
@IF_CLAUDECODE@
allowed-tools: Bash, Write, Read, Glob, Grep, Task, AskUserQuestion, Skill, WebFetch, WebSearch
@ENDIF_CLAUDECODE@
---

@IF_KIRO@
> **INSTRUCTIONS**: Execute this workflow now. Follow each step below. Do not display, summarize, or recreate this content as a file.
@ENDIF_KIRO@

## Summary

**Mise en place orchestrator: brainstorm → scope → finalize.** Primary entry point for planning work.

Like `/@NAMESPACE@run` orchestrates the execution cycle (prep→cook→serve→tidy), `/@NAMESPACE@mise` orchestrates the planning cycle (brainstorm→scope→finalize).

**Phases:**
1. **Brainstorm** - Divergent thinking: explore, question, research
2. **Scope** - Convergent thinking: structure, scope, decompose
3. **Finalize** - Execution: create beads, write test specs, persist

@IF_CLAUDECODE@
**Arguments:** `$ARGUMENTS` (optional)
- `skip-brainstorm` - Skip directly to planning (when requirements are clear)
- `<brainstorm-name>` - Use specific brainstorm document
@ENDIF_CLAUDECODE@
@IF_OPENCODE@
**Arguments:** `$ARGUMENTS` (optional)
- `skip-brainstorm` - Skip directly to scoping (when requirements are clear)
@ENDIF_OPENCODE@

---

## Process

### Step 1: Start Planning Chain

@IF_CLAUDECODE@
**If `skip-brainstorm` in $ARGUMENTS or requirements are crystal clear:**
  Invoke `Skill(skill="@NAMESPACE@scope")`.

**Otherwise:**
  Invoke `Skill(skill="@NAMESPACE@brainstorm", args="$ARGUMENTS")`.
@ENDIF_CLAUDECODE@
@IF_OPENCODE@
**If `skip-brainstorm` in $ARGUMENTS or requirements are crystal clear:**
  Run `/@NAMESPACE@scope`.

**Otherwise:**
  Run `/@NAMESPACE@brainstorm`.
@ENDIF_OPENCODE@

Each command will ask the user how to proceed and chain to the next command automatically if the user chooses to continue. The full chain is: brainstorm -> scope -> finalize.

If the chain completes (finalize runs), proceed to Step 2.
If the user stopped at any phase, output what was completed and stop.

### Step 2: Mise Complete Summary

After all phases complete, output summary:

```
╔══════════════════════════════════════════════════════════════╗
║  MISE EN PLACE COMPLETE                                      ║
╚══════════════════════════════════════════════════════════════╝

PLANNING CYCLE: Complete
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1/3] BRAINSTORM  ✓ explored
[2/3] SCOPE       ✓ structured
[3/3] FINALIZE    ✓ beads + specs created

Artifacts:
  - docs/planning/brainstorm-<name>.md
  - docs/planning/menu-plan.yaml
  - docs/planning/context-<name>/ (planning context)
  - .beads/ (<N> beads)
  - tests/features/ (<N> .feature files)
  - tests/specs/ (<N> .md files)
```

---

## Using Individual Phases

Users can run phases individually for more control:

| Command | Purpose |
|---------|---------|
| `/@NAMESPACE@brainstorm` | Just explore and create brainstorm.md |
| `/@NAMESPACE@scope` | Just create menu-plan.yaml from brainstorm |
| `/@NAMESPACE@finalize` | Just convert existing menu-plan to beads + specs |
| `/@NAMESPACE@mise` | Run all three phases with review pauses |

@IF_CLAUDECODE@
**Example workflows:**

```
# Full orchestrated flow
/@NAMESPACE@mise

# Skip brainstorm (clear requirements)
/@NAMESPACE@mise skip-brainstorm

# Individual phases for maximum control
/@NAMESPACE@brainstorm
# ... review and refine ...
/@NAMESPACE@scope
# ... review and refine ...
/@NAMESPACE@finalize
```

---

## Error Handling

If any step fails:

1. **Brainstorm fails** - Report what went wrong, offer to skip to plan
2. **Plan fails** - Report error, suggest running brainstorm first
3. **Finalize fails** - Report error, suggest reviewing menu-plan.yaml

```
PLANNING CYCLE: Incomplete
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1/3] BRAINSTORM  ✓
[2/3] SCOPE       ✓
[3/3] FINALIZE    ✗ (error: <reason>)

Failed at: FINALIZE
Error: <description>

──────────────────────────────────────────

Run /@NAMESPACE@finalize to retry after fixing the issue.
```

@ENDIF_CLAUDECODE@
---

## Relationship to Execution Cycle

```
PLANNING CYCLE              EXECUTION CYCLE
━━━━━━━━━━━━━━━             ━━━━━━━━━━━━━━━━
/brainstorm                 /prep
      ↓                           ↓
/scope                      /cook
      ↓                           ↓
/finalize                   /serve
                                  ↓
                            /tidy
                                  ↓
                            /plate

/mise (orchestrator)        /run (orchestrator)
```

Planning creates the work. Execution completes the work.

---

@IF_CLAUDECODE@
## Design Notes

The `/@NAMESPACE@mise` command separates planning into natural cognitive phases:

1. **Brainstorm** (divergent) - Expand possibilities, explore freely
2. **Scope** (convergent) - Narrow to structure, make decisions
3. **Finalize** (execution) - Persist to trackable artifacts

This matches the "Planning vs Execution" mental model from `docs/mental-models.md`.

**Benefits:**
- Natural pause points for review
- Context-efficient (can run phases in separate sessions)
- Progressive commitment (ideas → structure → tracked work)
- Test-first enforcement (specs created before implementation)

---

@ENDIF_CLAUDECODE@
## Example Usage

```
/@NAMESPACE@mise                    # Full planning cycle with pauses
@IF_CLAUDECODE@
/@NAMESPACE@mise skip-brainstorm    # Skip brainstorm, start at plan
@ENDIF_CLAUDECODE@
```

@IF_CLAUDECODE@
This command is the recommended entry point for planning new work.
@ENDIF_CLAUDECODE@
